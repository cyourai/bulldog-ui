<template>
  <div class="check-picture-container" v-loading="loading">
    <div class="p-index main screen" id="con" ref="screen">
      <div class="nr" id="nr" style="position: relative; width: 100%; height: 100%;">
        <div class="eqx-progress-bar" style="display: none;">
          <span style="width: 35.5556px;"></span><em class="page-tip">1/9</em></div>
          <section class="main-page z-current">
            <div class="m-img" id="page1" _tracker_view_="_tracker_view_">
            <div class="edit_wrapper" data-scene-id="1525570167" style="position: relative; z-index: 1">
              <section class="layer" id="layer:5423332997"
                       style="position: absolute; width: 100%; height: 100%; z-index: 1; display: block;">
                <div class="layer-box">
                  <ul id="edit_area" class="layer-items edit_area  weebly-content-area weebly-area-active"
                      style="margin-top: 62px;">
                    <li id="inside_2649361957" num="32" ctype="h" class="item item-comp"
                        style="position: absolute; z-index: 32; opacity: 0; width: 56px; height: 45px; top: 412px; left: 251px; transform: rotateZ(0deg); display: block;"
                        abs-pos="l-251-t-412-w-56-h-45" eqx-id="2649361957">
                      <div class="element-box"
                           style="width: 100%; height: 100%; top: 412px; left: 251px; z-index: 32; color: rgb(85, 85, 85); border-width: 0px; border-style: solid; border-color: rgb(0, 0, 0); padding-bottom: 0px; padding-top: 0px; line-height: 1; border-radius: 0px; transform: none; box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 0px; text-align: left; margin-top: 0px; margin-bottom: 0px;">
                        <div class="element-box-contents" style="width: 100%; height: 100%; position: relative;">
                          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                               version="1.1" id="2649361957" x="0px" y="0px" width="100%" height="100%"
                               viewBox="0 0 64 64" enable-background="new 0 0 64 64" xml:space="preserve"
                               preserveAspectRatio="none" class="element svg-element">
                          <rect fill="#08A1EF" width="64" height="64" style="fill: rgb(8, 161, 239);"></rect>
                          </svg>
                        </div>
                      </div>
                    </li>
                    <li id="inside_2428850798" num="31" ctype="h" class="item item-comp"
                        style="position: absolute; z-index: 31; opacity: 0; width: 56px; height: 45px; top: 414px; left: 192px; transform: rotateZ(0deg); display: block;"
                        abs-pos="l-192-t-414-w-56-h-45" eqx-id="2428850798">
                      <div class="element-box"
                           style="width: 100%; height: 100%; top: 414px; left: 192px; z-index: 31; color: rgb(85, 85, 85); border-width: 0px; border-style: solid; border-color: rgb(0, 0, 0); padding-bottom: 0px; padding-top: 0px; line-height: 1; border-radius: 0px; transform: none; box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 0px; text-align: left; margin-top: 0px; margin-bottom: 0px;">
                        <div class="element-box-contents" style="width: 100%; height: 100%; position: relative;">
                          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                               version="1.1" id="2428850798" x="0px" y="0px" width="100%" height="100%"
                               viewBox="0 0 64 64" enable-background="new 0 0 64 64" xml:space="preserve"
                               preserveAspectRatio="none" class="element svg-element">
<rect fill="#08A1EF" width="64" height="64" style="fill: rgb(8, 161, 239);"></rect>
</svg>
                        </div>
                      </div>
                    </li>
                    <li id="inside_8872050888" num="30" ctype="h" class="item item-comp"
                        style="position: absolute; z-index: 30; opacity: 0; width: 56px; height: 45px; top: 413px; left: 134px; transform: rotateZ(0deg); display: block;"
                        abs-pos="l-134-t-413-w-56-h-45" eqx-id="8872050888">
                      <div class="element-box"
                           style="width: 100%; height: 100%; top: 413px; left: 134px; z-index: 30; color: rgb(85, 85, 85); border-width: 0px; border-style: solid; border-color: rgb(0, 0, 0); padding-bottom: 0px; padding-top: 0px; line-height: 1; border-radius: 0px; transform: none; box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 0px; text-align: left; margin-top: 0px; margin-bottom: 0px;">
                        <div class="element-box-contents" style="width: 100%; height: 100%; position: relative;">
                          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                               version="1.1" id="8872050888" x="0px" y="0px" width="100%" height="100%"
                               viewBox="0 0 64 64" enable-background="new 0 0 64 64" xml:space="preserve"
                               preserveAspectRatio="none" class="element svg-element">
<rect fill="#08A1EF" width="64" height="64" style="fill: rgb(8, 161, 239);"></rect>
</svg>
                        </div>
                      </div>
                    </li>
                    <li id="inside_6369176829" num="29" ctype="h" class="item item-comp screen-evidence"
                        abs-pos="l-75-t-412-w-56-h-45" eqx-id="6369176829">
                      <div>
                        <div class="screen-evidence-inline" style="">
                          <x-img :src="formData.checkAppEvidence1"></x-img>
                        </div>
                        <div class="screen-evidence-inline" style="">
                          <x-img :src="formData.checkAppEvidence2"></x-img>
                        </div>
                        <div class="screen-evidence-inline" style="">
                          <x-img :src="formData.checkAppEvidence3"></x-img>
                        </div>
                      </div>
                      <div class="screen-qrcode" style="">
                        <div class="screen-qrcode-inline" style="">
                          <vue-qr :text="qrcodeData.url" :margin="0" colorDark="#f67b29" colorLight="#fff" :logoSrc="qrcodeData.icon + '?cache'" :logoScale="0.3" :size="200"></vue-qr>
                          <br><span>长按二维码查看详细巡检报告</span>
                        </div>
                      </div>
                    </li>

                    <!--手机图片-->
                    <li id="inside_9873290130" num="28" ctype="8" class="item item-comp"
                        style="position: absolute; z-index: 28; opacity: 1; width: 42px; height: 42px; top: 279px;
                        left: 19px; transform: rotateZ(0deg); display: block;"
                        abs-pos="l-25-t-279-w-42-h-42" eqx-id="9873290130">
                      <div class="element-box"
                           style="width: 100%; height: 100%; top: 279px; left: 25px; z-index: 28; color: rgb(255, 255, 255); line-height: 1; border-width: 0px; border-style: solid; border-color: rgb(204, 204, 204); border-radius: 0px; background-color: transparent; padding-bottom: 0px; padding-top: 0px; transform: none; box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 0px; text-align: left; margin-top: 0px; margin-bottom: 0px; animation: 2s ease 0s infinite normal both running wobble;">
                        <div class="element-box-contents" style="width: 100%; height: 100%"><a id="9873290130" ctype="8"
                                                                                               class="element eqx-tel editable-text"
                                                                                               style="cursor: default; width: 100%;height: 100%;padding: 0"
                                                                                               _tracker_click_="_tracker_click_"><img
                          style="width: 100%; height: 100%" src="/static/images/ppp/mobile.png"
                          _tracker_click_="_tracker_click_"></a></div>
                      </div>
                    </li>

                    <li id="inside_1166360034" num="15" ctype="2" class="item item-comp wsite-text"
                        style="position: absolute; z-index: 15; opacity: 1; width: 128px; height: 109px; top: 299px; left: 175px; transform: rotateZ(0deg); display: block;"
                        abs-pos="l-175-t-299-w-128-h-109" eqx-id="1166360034">
                      <div class="element-box"
                           style="width: 100%; height: 100%; top: 299px; left: 175px; z-index: 15; color: rgb(103, 103, 103); border-width: 0px; border-style: solid; border-color: rgb(0, 0, 0); padding-bottom: 0px; padding-top: 0px; line-height: 0.8; border-radius: 0px; transform: none; box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 0px; text-align: left; margin-top: 0px; margin-bottom: 0px; animation: 2s ease 1s 1 normal both running fadeInRight;">
                        <div class="element-box-contents" style="width: 100%; height: 100%">
                          <div id="1166360034" ctype="2" class="element comp_paragraph editable-text"
                               style="cursor: default; user-select: auto; min-height: inherit;">
                            <div class="screen-font check-title" style="width: 200px">巡检结果：
                              <span v-if="formData.checkAppResult === '0'" class="error font-status">异常</span>
                              <span v-else class="ok font-status">正常</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </li>
                    <li id="inside_1756453224" num="14" ctype="2" class="item item-comp wsite-text"
                        style="position: absolute; z-index: 14; opacity: 1; width: 116px; height: 62px; top: 213px; left: 187px; transform: rotateZ(0deg); display: block;"
                        abs-pos="l-187-t-213-w-116-h-62" eqx-id="1756453224">
                      <div class="element-box"
                           style="width: 100%; height: 100%; top: 213px; left: 187px; z-index: 14; color: rgb(103, 103, 103); border-width: 0px; border-style: solid; border-color: rgb(0, 0, 0); padding-bottom: 0px; padding-top: 0px; line-height: 1; border-radius: 0px; transform: none; box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 0px; text-align: left; margin-top: 0px; margin-bottom: 0px; animation: 2s ease 1s 1 normal both running fadeInRight;">
                        <div class="element-box-contents" style="width: 100%; height: 100%">
                          <div id="1756453224" ctype="2" class="element comp_paragraph editable-text"
                               style="cursor: default; user-select: auto; min-height: inherit;">
                            <div class="screen-font check-title">巡检时间：</div>
                            <div class="screen-font check-value">  {{formData.checkAppTime}}</div>
                          </div>
                        </div>
                      </div>
                    </li>
                    <li id="inside_9331807357" num="13" ctype="2" class="item item-comp wsite-text"
                        style="position: absolute; z-index: 13; opacity: 1; width: 116px; height: 38px; top: 127px; left: 175px; transform: rotateZ(0deg); display: block;"
                        abs-pos="l-175-t-127-w-116-h-38" eqx-id="9331807357">
                      <div class="element-box"
                           style="width: 100%; height: 100%; top: 127px; left: 175px; z-index: 13; color: rgb(103, 103, 103); border-width: 0px; border-style: solid; border-color: rgb(0, 0, 0); padding-bottom: 0px; padding-top: 0px; line-height: 1; border-radius: 0px; transform: none; box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 0px; text-align: left; margin-top: 0px; margin-bottom: 0px; animation: 2s ease 1s 1 normal both running fadeInRight;">
                        <div class="element-box-contents" style="width: 100%; height: 100%">
                          <div id="9331807357" ctype="2" class="element comp_paragraph editable-text"
                               style="cursor: default; user-select: auto; min-height: inherit;">
                            <div class="screen-font check-title">巡检人：</div>
                            <div class="screen-font check-value">  {{checkAppUserNickName}}</div>
                          </div>
                        </div>
                      </div>
                    </li>
                    <li id="inside_417376359" num="12" ctype="2" class="item item-comp wsite-text"
                        style="position: absolute; z-index: 12; opacity: 1; width: 201px; height: 61px; top: 320px;
                        left: 0px; transform: rotateZ(0deg); display: block;"
                        abs-pos="l--74-t-300-w-201-h-61" eqx-id="417376359">
                      <div class="element-box"
                           style="width: 100px; height: 100%; top: 300px; z-index: 12; color: rgb(103, 103, 103);
                           border-width: 0px; border-style: solid; border-color: rgb(0, 0, 0); padding-bottom: 0px; padding-top: 0px; line-height: 0.8; border-radius: 0px; transform: none; box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 0px; text-align: left; margin-top: 0px; margin-bottom: 0px;">
                        <div class="element-box-contents" style="width: 100%; height: 100%">
                          <div id="417376359" ctype="2" class="element comp_paragraph editable-text"
                               style="cursor: default; user-select: auto; min-height: inherit;">
                            <div style="text-align: right;"><span
                              style="font-size: 14px; color: inherit; line-height: inherit; background-color: initial;">电话</span>
                            </div>
                            <div style="text-align: right;"><span
                              style="font-size: 14px; color: inherit; line-height: inherit;
                              background-color: initial;">{{checkAppUserMobile}}</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </li>
                    <li id="inside_8184171338" num="10" ctype="4" class="item item-comp"
                        style="position: absolute; z-index: 10; opacity: 1; width: 41px; height: 40px; top: 127px; left: 135px; transform: rotateZ(0deg); display: block;"
                        abs-pos="l-135-t-127-w-41-h-40" eqx-id="8184171338">
                      <div class="element-box"
                           style="width: 100%; height: 100%; top: 127px; left: 135px; z-index: 10; color: rgb(103, 103, 103); border-width: 0px; border-style: solid; border-color: rgb(0, 0, 0); padding-bottom: 0px; padding-top: 0px; line-height: 1; border-radius: 0px; transform: none; box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 0px; text-align: left; margin-top: 0px; margin-bottom: 0px; animation: 2s ease 1s 1 normal both running fadeInRight;">
                        <div class="element-box-contents" style="width: 100%; height: 100%; overflow: hidden;"><img
                          id="8184171338" ctype="4" class="element comp_image editable-image"
                          style="display: block; width: 41.0526px; height: 40px; margin-left: -0.0263158px; margin-top: 0px;"
                          draggable="false" src="/static/images/ppp/mail.png"
                          _tracker_click_="_tracker_click_"></div>
                      </div>
                    </li>
                    <li id="inside_7155707453" num="9" ctype="4" class="item item-comp"
                        style="position: absolute; z-index: 9; opacity: 1; width: 41px; height: 40px; top: 298px; left: 134px; transform: rotateZ(0deg); display: block;"
                        abs-pos="l-134-t-298-w-41-h-40" eqx-id="7155707453">
                      <div class="element-box"
                           style="width: 100%; height: 100%; top: 298px; left: 134px; z-index: 9; color: rgb(103, 103, 103); border-width: 0px; border-style: solid; border-color: rgb(0, 0, 0); padding-bottom: 0px; padding-top: 0px; line-height: 1; border-radius: 0px; transform: none; box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 0px; text-align: left; margin-top: 0px; margin-bottom: 0px; animation: 2s ease 1s 1 normal both running fadeInRight;">
                        <div class="element-box-contents" style="width: 100%; height: 100%; overflow: hidden;"><img
                          id="7155707453" ctype="4" class="element comp_image editable-image"
                          style="display: block; width: 41.0526px; height: 40px; margin-left: -0.0263158px; margin-top: 0px;"
                          draggable="false" src="/static/images/ppp/desk.png"
                          _tracker_click_="_tracker_click_"></div>
                      </div>
                    </li>
                    <li id="inside_9274377099" num="8" ctype="4" class="item item-comp"
                        style="position: absolute; z-index: 8; opacity: 1; width: 41px; height: 40px; top: 216px; left: 154px; transform: rotateZ(0deg); display: block;"
                        abs-pos="l-154-t-216-w-41-h-40" eqx-id="9274377099">
                      <div class="element-box"
                           style="width: 100%; height: 100%; top: 216px; left: 154px; z-index: 8; color: rgb(103, 103, 103); border-width: 0px; border-style: solid; border-color: rgb(0, 0, 0); padding-bottom: 0px; padding-top: 0px; line-height: 1; border-radius: 0px; transform: none; box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 0px; text-align: left; margin-top: 0px; margin-bottom: 0px; animation: 2s ease 1s 1 normal both running fadeInRight;">
                        <div class="element-box-contents" style="width: 100%; height: 100%; overflow: hidden;"><img
                          id="9274377099" ctype="4" class="element comp_image editable-image"
                          style="display: block; width: 41.0526px; height: 40px; margin-left: -0.0263158px; margin-top: 0px;"
                          draggable="false" src="/static/images/ppp/chat.png"
                          _tracker_click_="_tracker_click_"></div>
                      </div>
                    </li>
                    <li id="inside_4035837234" num="7" ctype="4" class="item item-comp"
                        style="position: absolute; z-index: 7; opacity: 1; width: 81px; height: 80px; top: 249px; left: 8px; transform: rotateZ(0deg); display: block;"
                        abs-pos="l-8-t-249-w-81-h-80" eqx-id="4035837234">
                      <div class="element-box"
                           style="width: 100%; height: 100%; top: 249px; left: 8px; z-index: 7; color: rgb(103, 103, 103); border-width: 0px; border-style: solid; border-color: rgb(0, 0, 0); padding-bottom: 0px; padding-top: 0px; line-height: 1; border-radius: 0px; transform: none; box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 0px; text-align: left; margin-top: 0px; margin-bottom: 0px;">
                        <div class="element-box-contents" style="width: 100%; height: 100%; overflow: hidden;"><img
                          id="4035837234" ctype="4" class="element comp_image editable-image"
                          style="display: block; width: 81px; height: 80.2768px; margin-top: -0.138393px; margin-left: 0px;"
                          draggable="false" src="/static/images/ppp/circle_mobile.png"
                          _tracker_click_="_tracker_click_"></div>
                      </div>
                    </li>
                    <li id="inside_3307783038" num="6" ctype="4" class="item item-comp"
                        style="position: absolute; z-index: 6; opacity: 1; width: 84px; height: 39px; top: 16px; left: 6px; transform: rotateZ(0deg); display: block;"
                        abs-pos="l-6-t-16-w-84-h-39" eqx-id="3307783038">
                      <div class="element-box"
                           style="width: 100%; height: 100%; top: 16px; left: 6px; z-index: 6; color: rgb(103, 103, 103); border-width: 0px; border-style: solid; border-color: rgb(0, 0, 0); padding-bottom: 0px; padding-top: 0px; line-height: 1; border-radius: 0px; transform: none; box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 0px; text-align: left; margin-top: 0px; margin-bottom: 0px;">
                        <div class="element-box-contents logo-image"
                             style="height: 100%; overflow: hidden;"><img
                          id="3307783038" ctype="4" class="element comp_image editable-image"
                          style="display: block; width: 200px; height: 39.171px; margin-top: -0.0854922px; margin-left:0px;"
                          draggable="false"
                          src="/static/images/ppp/ppp_logo_red.png">
                        </div>
                      </div>
                    </li>
                    <li id="inside_1594535718" num="5" ctype="2" class="item item-comp wsite-text"
                        style="position: absolute; z-index: 5; opacity: 1; width: 150px; height: 38px;
                        top: 100px;transform: rotateZ(0deg); display: block; "
                        abs-pos="l-31-t-100-w-94-h-38" eqx-id="1594535718">
                      <div class="element-box"
                           style="width: 100%; height: 100%; top: 100px; left: 31px; z-index: 5; color: #cb10e8; border-width: 0px; border-style: solid; border-color: rgb(0, 0, 0); padding-bottom: 0px; padding-top: 0px; line-height: 1; border-radius: 0px; transform: none; box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 0px; text-align: left; margin-top: 0px; margin-bottom: 0px;">
                        <div class="element-box-contents" style="width: 100%; height: 100%">
                          <div id="1594535718" ctype="2" class="element comp_paragraph editable-text"
                               style="cursor: default; user-select: auto; min-height: inherit;"><span
                            style="color: rgb(126, 36, 18); font-weight: bold;">开发部-运维组</span></div>
                        </div>
                      </div>
                    </li>
                    <li id="inside_5058404783" num="4" ctype="4" class="item item-comp"
                        style="position: absolute; z-index: 4; opacity: 1;
                        margin-left：0px; margin-right:0px; idth: 134px; height: 131px; top: 141px; left: 6px;
                        transform:
                        rotateZ(0deg);
                        display:
                        block;"
                        abs-pos="l-6-t-141-w-134-h-131" eqx-id="5058404783">
                      <div class="element-box"
                           style="width: 100%; height: 100%; top: 141px; left: 6px; z-index: 4; color: rgb(103, 103, 103); border-width: 0px; border-style: solid; border-color: rgb(0, 0, 0); padding-bottom: 0px; padding-top: 0px; line-height: 1; border-radius: 0px; transform: none; box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 0px; text-align: left; margin-top: 0px; margin-bottom: 0px;">
                        <div class="avatar-border" style="width: 100%; height: 100%; overflow: hidden;">
<!--                          <img id="5058404783" ctype="4" class="element comp_image editable-image"
                          style="display: block; width: 134.011px; height: 131px; margin-left: -0.00574713px; margin-top: 0px;"
                          draggable="false" :src=checkAppUserAvatar
                          _tracker_click_="_tracker_click_"></div>-->
                          <avatar :image="checkAppUserAvatar" :size=130></avatar>
                        </div>
                      </div>
                    </li>
                    <!--弧线-->
                    <li id="inside_6074223524" num="2" ctype="4" class="item item-comp"
                        style="position: absolute; z-index: 2; opacity: 1; width: 175px; height: 338px; top: 68px;
                        left: 42px; transform: rotateZ(0deg); display: block;"
                        abs-pos="l-37-t-68-w-175-h-338" eqx-id="6074223524">
                      <div class="element-box"
                           style="width: 100%; height: 100%; top: 68px; left: 37px; z-index: 2; color: rgb(103, 103, 103); border-width: 0px; border-style: solid; border-color: rgb(0, 0, 0); padding-bottom: 0px; padding-top: 0px; line-height: 1; border-radius: 0px; transform: none; box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 0px; text-align: left; margin-top: 0px; margin-bottom: 0px; animation: 2s ease 0s 1 normal both running flip;">
                        <div class="element-box-contents" style="width: 100%; height: 100%; overflow: hidden;"><img
                          id="6074223524" ctype="4" class="element comp_image editable-image"
                          style="display: block; width: 176.275px; height: 338px; margin-left: -0.637417px; margin-top: 0px;"
                          draggable="false" src="/static/images/ppp/circle.png"
                          _tracker_click_="_tracker_click_"></div>
                      </div>
                    </li>
                    <li id="inside_5320326568" num="1" ctype="4" class="item item-comp"
                        ref="backGround"
                        style="position: absolute; z-index: 1; opacity: 1; width: 100%; top: -24px; left: -1px; transform: rotateZ(0deg); display: block;"
                        abs-pos="l--1-t--24-w-323-h-586" eqx-id="5320326568">
                      <div class="element-box"
                           style="width: 100%; height: 100%; top: -24px; left: -1px; z-index: 1; color: rgb(103, 103, 103); border-width: 0px; border-style: solid; border-color: rgb(0, 0, 0); padding-bottom: 0px; padding-top: 0px; line-height: 1; border-radius: 0px; transform: none; box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 0px; text-align: left; margin-top: 0px; margin-bottom: 0px;">
                        <div class="element-box-contents" style="width: 100%; height: 100%; overflow: hidden;"><img
                          id="5320326568" ctype="4" class="element comp_image editable-image"
                          style="display: block; width: 100%; margin-top: -0.475781px; margin-left: 0px;"
                          draggable="false" src="/static/images/ppp/back_ground_check_app.png"
                          _tracker_click_="_tracker_click_"></div>
                      </div>
                    </li>
                  </ul>
                </div>
              </section>
            </div>
          </div>
          </section>
       </div>
    </div>
  </div>
</template>
<script>
  import html2canvas from 'html2canvas'
  import { Group, XButton, XDialog, CellFormPreview, Cell, CellBox, XImg } from 'vux'
  import { getByCode, isNotEmpty } from '@/utils'
  import { getByUserName } from '@/api/user'
  import vueQr from 'vue-qr'
  import Avatar from 'vue-avatar-component'

  export default {
    name: 'checkAppPicture',
    components: {
      Group, XButton, XDialog, CellFormPreview, Cell, CellBox, XImg,
      getByCode, vueQr, Avatar
    },
    watch: {
      $route(to, from) {
        this.init()
      },
      clientHeight: function() {
        this.changeFixed(this.clientHeight)
      }
    },
    data() {
      return {
        loading: false,
        isDialogShow: false,
        isShowEvidence1: false,
        isShowEvidence2: false,
        isShowEvidence3: false,
        isShowAvatar: false,
        isShowPicture: true,
        clientHeight: 800,
        dataURL: '',
        // 根据编号查询实体
        queryUrl: '/maintenance/checkApp',
        checkAppCode: '',
        // 巡检人相关
        checkAppUserNickName: '',
        checkAppUserAvatar: '',
        checkAppUserMobile: '',
        qrcodeData: {
          url:
            `${document.location.protocol}//${window.location.host}:${document.location.port}/#/checkAppEdit/${this.checkAppCode}`,
          icon: `/static/images/ppp/bulldog.png`
        },
        // 表单数据
        formData: {
          // 序号
          checkAppId: null,
          // 巡检编号
          checkAppCode: null,
          checkAppEvidence1: null,
          checkAppEvidence2: null,
          checkAppEvidence3: null,
          // 巡检结果
          checkAppResult: 1,
          // 巡检人
          checkAppUser: null,
          // 巡检时间
          checkAppTime: null,
          // 解决方案
          checkAppSolution: '',
          // 备注
          checkAppRemark: ''
        }
      }
    },
    mounted() {
      // 获取浏览器可视区域高度
      this.clientHeight = `${document.documentElement.clientHeight}`
      window.onresize = function resizeHeight() {
        this.clientHeight = `${document.documentElement.clientHeight}`
      }
    },
    created() {
      this.init()
    },
    methods: {
      close() {
      },
      init() {
        this.formData.checkAppCode = this.$route.params.checkAppCode
        getByCode(this.queryUrl, this.formData.checkAppCode)
          .then(result => {
            this.formData = result.data
            this.isShowEvidence1 = isNotEmpty(this.formData.checkAppEvidence1)
            this.isShowEvidence2 = isNotEmpty(this.formData.checkAppEvidence2)
            this.isShowEvidence3 = isNotEmpty(this.formData.checkAppEvidence3)
            getByUserName(this.formData.checkAppUser).then(result => {
              this.checkAppUserNickName = result.data.userNickName
              this.checkAppUserAvatar = result.data.userAvatar
              this.checkAppUserMobile = result.data.userMobile
              this.isShowAvatar = isNotEmpty(this.checkAppUserAvatar)
            }).then(() => {
            })
          })
          .finally(() => {
            this.loading = false
          })
      },
      imageHandler() {
        const self = this
        const ref = this.$refs.picture
        html2canvas(ref, {}).then((canvas) => {
          const dataURL = canvas.toDataURL('image/png')
          self.dataURL = dataURL
          this.isDialogShow = true
        }).finally(() => {
        })
      },
      successHandler() {
        // setTimeout(this.imageHandler(), 3000)
      },
      isNotEmpty(data) {
        return isNotEmpty(data)
      },
      changeFixed(clientHeight) {
        console.log(clientHeight)
        this.$refs.backGround.style.height = clientHeight + 'px'
      }
    }
  }
</script>
<style rel="stylesheet/scss" lang="scss" scoped>
  .check-picture-container /deep/ {
    .screen {
      .check-title {
        margin-bottom: 10px;
      }
      .check-value {
        width: 200px !important;
        margin-left: 20px;
      }
      .screen-evidence {
        width: 100%;
        height: 150px;
        top: 400px;
        position: absolute;
        z-index: 29;
        transform: rotateZ(0deg);
        display: block;
        text-align: center;
        img {
          width: 100%;
          height: 100%;
        }
        .screen-evidence-inline {
          display: inline-block !important;
          margin-left:5px;
          width: 100px;
          height: 100px;
          border: 2px solid #cccccc;
        }
      }
      .screen-qrcode {
        width: 100%;
        height: 150px;
        top: 110px;
        position: absolute;
        z-index: 29;
        transform: rotateZ(0deg);
        display: block;
        text-align: center;
        img {
          width: 100%;
          height: 100%;
        }
        .screen-qrcode-inline {
          display: inline-block !important;
          margin-left:5px;
          width: 300px;
          height: 100px;
          img {
            width: 100px;
          }
          span {
          }
        }
      }
      .screen-font {
        font-size: 16px !important;
        font-weight: bold !important;
      }
      .font-status {
        font-weight: bold;
        font-size: 32px;
      }
      .editable-text {
        margin-left: 10px;
      }
      .avatar-border {
        border: 2px solid #E81A6A;
        border-radius: 50%;
      }
      .logo-image {
        width: 200px;
      }
    }
  }
</style>
